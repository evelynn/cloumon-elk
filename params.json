{"name":"CloumonELK","tagline":"Cloumon ELK version","body":"# About CloumonELK\r\nCloumonELK is a monitoring solution package based on the popular ELK (ElasticSearch, Logstash and Kibana) stack.  It helps you to build your own monitoring stack easily, without hassles to download and install ELK from the scratch. CloumonELK provides predefined configuration files to collect metrics from bigdata components such as Apache Tajo, Apache Hadoop, Apache HBase, Apache ZooKeeper and Apache Flume.\r\nCloumonELK can be a good start point to monitor the metrics from bigdata components.\r\n\r\n* Support multi-cluster monitoring\r\n* Ready-to-use Kibana dashboards and charts\r\n \r\n# ELK Versions\r\n* Elasticsearch 2.1.1\r\n* Kibana 4.3.1-linux\r\n* Logstash 2.1.1\r\n\r\n# Requirements\r\n* x86_64 linux server \r\n* JDK 1.8 \r\n* gmonitor user account and its ssh key\r\n\r\n# Getting started\r\n## Download CloumonELK source codes\r\n\r\n`git clone https://github.com/gruter/cloumon-elk.git`\r\n\r\nRun the download-modules script to get the binaries of Elasticsearch, Logstash and Kibana.\r\n\r\n`./download-modules`\r\n\r\nThen go to your download directory and edit the env.sh file. \r\n\r\n```\r\n$ vi env.sh\r\nELASTICSEARCH_HOST_PORT=host:port\r\n```\r\n\r\n* host : the hostname of your elasticsearch server. The elasticsearch server stores the metrics of Logstash. If you setup Logstash and E/S on the same host, set it \"localhost\".\r\n* port : transport port of the elasticsearch (eg. 5921)  \r\n\r\n## Install Elasticsearch\r\nInstall elasticsearch with the following command. Change hostname and heapsize according to your environment.\r\n\r\n```\r\n./install.sh elasticsearch -s hostname -m heapsize\r\n```\r\n\r\n`ex) ./install.sh elasticsearch -s 192.168.0.100 -m 4g`\r\n\r\n## Install Kibana\r\nInstall Kibana. \r\n\r\n```\r\n./install.sh kibana -s hostname -e \"elasticsearch_host\"\r\n```\r\n\r\n`ex) ./install.sh kibana -s 192.168.0.100 -e \"localhost\"`\r\n\r\n## Install Logstash\r\nInstall Logstash. \r\n\r\n```\r\n./install.sh logstash -c target_service -p protocol -s hostname -f config_file -g group_name [-k]\r\n```\r\n\r\n`ex) ./install.sh logstash -c hadoop -p jmx -s 192.168.0.100 -f ./hadoop.config -g development`\r\n\r\n* -c target_service: the name of a service to be monitored. eg. hadoop, hbase, zookeeper, flume \r\n* -p protocol: the protocol to gather metrics. eg. jmx, http, ganglia\r\n* -s hostname: the host where Logstash is installed\r\n* -f config_file: the path of the config file containing target hosts to be monitored in jmx protocol.\r\n* -g group_name: group name of a cluster. CloumonELK can monitor multiple clusters and each cluster is called a group. \r\n* -k: skip installation of Logstash binary. If you already have Logstash binary installed, you can skip the binary installation step with this option.\r\n\r\n### Supported Components and Protocols\r\nBelow is the list of components that can be monitored with CloumonELK.\r\n\r\n| Component | Protocol |\r\n| ---- | ---- |\r\n| Tajo | ganglia |\r\n| Hadoop | jmx <br> ganglia |\r\n| Hadoop-poller | jmx <br> ganglia |\r\n| Flume | jmx <br> ganglia |\r\n| HBase | jmx <br> ganglia |\r\n| ZooKeeper | jmx |\r\n| ElasticSearch | http |\r\n| System | http |\r\n\r\n1) JMX protocol\r\n\r\nIn case you use JMX protocol to monitor certain component, you need to define the type of server in the configuration file. Below are the supported components and type of server:\r\n\r\n* Hadoop\r\n    * namenode\r\n    * datanode\r\n    * journalnode\r\n* HBase\r\n    * hbase-master\r\n    * hbase-regionserver\r\n* Flume\r\n    * flume\r\n* ZooKeeper\r\n    * zookeeper\r\n* Tajo\r\n    * master\r\n    * worker\r\n\r\nFor the services using JMX, you need to create the config file for each service. For example, hadoop.config would look like: \r\n\r\n```\r\n$ vi hadoop.config\r\nnamenode host001\r\nnamenode host002\r\njournalnode host001\r\njournalnode host002\r\njournalnode host003\r\ndatanode host004\r\ndatanode host005\r\ndatanode host006\r\n```\r\n\r\nFor other services, refer to the sample-installer.sh for more information.\r\n\r\n2) hadoop-poller components\r\n\r\nhadoop-poller is an additional compent for gathering full metrics of hadoop. hadoop-poller connects to web admin page of namenode, parses the metric information on the page and store the metrics to elasticsearch. To use hadoop-poller, create \"namenodes.config\" file and add host:port of hadoop namenode in it. For example, if you have a namenode and standby namenode for HA, namenodes.config is likely to be:\r\n\r\n```\r\n$ vi  namenodes.config\r\nhost001:50070\r\nhost002:50070\r\n```\r\n\r\nAnd then intall hadoop-poller components, like below:\r\n\r\n```\r\n./install logstash -s 192.168.0.100 -c hadoop-poller -p ganglia -f  ./namenodes.config -k -g development\r\n```\r\n\r\n## Setting up Kibana reports\r\nWhen you've done with installing CloumonELK, setup the Kibana dashboards and chart templates. You can use built-in templates for the group \"development\" by the following command:\r\n\r\n```\r\n./kibana-data/restore.sh elasticsearch_host:port template_file group_name\r\n```\r\n\r\n`ex) ./kibana-data/restore.sh 192.168.0.100:5911 hadoop-ganglia.json development`\r\n\r\n\r\nThe following templates are included in CloumonELK:\r\n\r\n* hadoop-ganglia.json\r\n* hadoop-jmx.json\r\n* tajo-ganglia.json\r\n* hbase-ganglia.json\r\n* hbase-jmx.json\r\n* flume-ganglia.json\r\n* flume-jmx.json\r\n* zookeeper-jmx.json\r\n* system-http.json\r\n* elasticsearch-http.json\r\n\r\n# Create your own installer from sample-installer.sh\r\n\r\n`sample-installer.sh` has a bunch of install commands so that you can install multiple components at once. Build your own installer script based on sample-installer.sh and then install CloumonELK using your installer script.\r\n\r\n# Viewing Kibana Dashboards\r\n\r\nOK, now you've done with CloumonELK setup. Visit http://kibana_hostname:5931 in your web browser and see the Kibana dashboard and charts to monitor your clusters. \r\n\r\n# Screenshots\r\n\r\n\r\n# Screenshots\r\n\r\n![Tajo Dashboard (Ganglia)](images/tajo-dashboard-ganglia.png)\r\n\r\nTajo Dashboard (Ganglia)\r\n\r\n![Hadoop Dashboard (Ganglia)](images/hadoop-dashboard-ganglia.png)\r\n\r\nHadoop Dashboard (Ganglia)\r\n\r\n![HBase Dashboard (Ganglia)](images/hbase-dashboard-ganglia.png)\r\n\r\nHBase Dashboard (Ganglia)\r\n\r\n![ZooKeeper Dashboard (JMX)](images/zookeeper-dashboard-jmx.png)\r\n\r\nZooKeeper Dashboard (JMX)\r\n\r\n![Flume Dashboard (Ganglia)](images/flume-dashboard-ganglia.png)\r\n\r\nFlume Dashboard (Ganglia)","google":"UA-73366163-1","note":"Don't delete this file! It's used internally to help with page regeneration."}